{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">

  <title>SAR|Events</title>
  <meta content="" name="description">
  <meta content="" name="keywords">

  <!-- Favicons -->
  <link href="{% static 'assets/img/logo/sar_logo.svg'%}" style="width:10%!important" rel="icon">
  <link href="{% static 'assets/img/apple-touch-icon.png'%}" rel="apple-touch-icon">

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,400i,600,700|Raleway:300,400,400i,500,500i,700,800,900" rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="{% static 'assets/vendor/animate.css/animate.min.css'%}" rel="stylesheet">
  <link href="{% static 'assets/vendor/bootstrap/css/bootstrap.min.css'%}" rel="stylesheet">
  <link href="{% static 'assets/vendor/bootstrap-icons/bootstrap-icons.css'%}" rel="stylesheet">
  <link href="{% static 'assets/vendor/boxicons/css/boxicons.min.css'%}" rel="stylesheet">
  <link href="{% static 'assets/vendor/glightbox/css/glightbox.min.css'%}" rel="stylesheet">
  <link href="{% static 'assets/vendor/swiper/swiper-bundle.min.css'%}" rel="stylesheet">
  <!-- Template Main CSS File -->
  <link href="{% static 'assets/css/style.css'%}" rel="stylesheet">
</head>
<body>
  <style>

  main#main {
    background: #212529!important
  }

  .section-headline h2::after {
    border: 1px solid #f9fafb!important;
  }

  header#header{
    background: #0d1822!important;
  }

  .single-well ul li{
    display: flex!important;
    font-size: 16px;
    font-family: "Open Sans", sans-serif;
  }

  #sar_profile{
    color:#3ec1d5;
    font-weight: bold;
    cursor:pointer;
    margin-bottom:0px!important;
  }

  .modal-dialog {
    margin-top: 20%;
  }

  #profile_image{
      height:245px;
      width:390px;
  }

  .single-team-member{
    border:none;
  }

  #sar_title{
    font-weight: bold;    
  }

  #news,#testimonials,#insights,#research,#social_media_links,#articles{
    display:none;
  }

  .team-modal{
    cursor:pointer;
  }

  .footer-head h4 {
    padding-bottom:0px
  }

  h4.card-title {
    color:#000000!important;
  }

  /* a.card-link{
    color:
  } */

  span#footer-text{
    color:#29649a!important;
  }

  .section-headline h2 {
    color: #f9fafb!important;
  }
  </style>

  <!-- ======= Header ======= -->
  <header id="header" class="fixed-top d-flex align-items-center">
    <div class="container d-flex justify-content-between">

      <div class="logo">
        <h1><a href="{%url 'sar_home'%}"><span style="font-size:1.6rem!important"><img src="{% static 'assets/img/logo/sar_logo.svg'%}" style="width:8%!important;vertical-align: baseline;"><span style="color:#fff">Sovereign&nbsp;<span>Africa Ratings</span></a></h1>
      </div>

      <!-- ======= Navbar ======= -->
      <nav id="navbar" class="navbar">
        <ul>
          <li><a class="nav-link scrollto active" href="{%url 'sar_home'%}">Home</a></li>     
        </ul>
        <i class="bi bi-list mobile-nav-toggle"></i>
      </nav>
      <!-- ======= End Navbar ======= -->

    </div>
  </header>
   <!-- ======= End Header ======= -->


  <!-- ======= Hero Section ======= -->
  <main id="main" style="margin-top:30px">

   <!-- ======= Team Section ======= -->
  <div id="team" class="our-team-area area-padding">
    <div class="container">

      <div class="row">
        <div class="col-md-12 col-sm-12 col-xs-12">
          <div class="section-headline text-center" style="color:#f9fafb">
            <h2 style="color:#f9fafb">Events</h2>
          </div>
        </div>
      </div>

      <div>
      {% if messages %}
      {% for message in messages %}
      {%if message.level == 25%}
      <p style="display:none" id="success-message">{{message.level}}</p>
      {%elif message.level == 40%}
      <p style="display:none" id="error-message">{{message.level}}</p>
      {%endif%}
      {% endfor %}
      {% endif %}      
      </div>
     
      <div class="col-md-12">
        <div>
          <ol class="breadcrumb mb-0" style="padding-left:0!important;background-color:#f6f9ff!important;">
          <div class="input-group">
            <input type="text" class="form-control" 
            placeholder="Search by title,date..." id="event-search">
            <span class="input-group-btn" style="flex:inherit!important">
              <button class="btn btn-primary" type="button" id="search-button"><i class="fa bi-search" aria-hidden="true"></i></button>
            </span>
            </div>
          </ol>
        </div>
      </div>    
      <br>

      <div class="row">
      {% for event in get_all_events %}      
      <div class="col-xxl-6 col-md-12 mb-4">        
        {%if event.is_online%}
        <div class="card h-100 border-0">
          <div class="card-header">
            <h6 class="fw-bolder">{{event.event_title}}</h6>
            <h6 class="card-text"><small class="text">Date:&nbsp;{{event.event_date|date:"d/m/Y"}},&nbsp;{{event.event_venue}}</small></h6>
          </div>

          <div class="card-body">           
            <p class="card-text">{{event.introduction}}</p>
            {%if todays_date <= event.event_date%}
            <div class="card-footer bg-transparent border-dark text-center"><a class="btn btn-secondary" href="{{event.rsvp_link}}" target="_blank">RSVP Link</a></div>
            {%endif%}           
          </div>

          <div class="card-footer bg-transparent border-dark text-left justify-content-between border-0">
            {%if event.meeting_recording_url%}
            <a class="btn btn-secondary" href="{{event.meeting_recording_url}}" target="_blank">Recording</a>
            {%endif%}

            {%if event.event_presentation%}
            <a class="btn btn-secondary" href="{{event.presentation_url}}" target="_blank">Presentation</a>
            {%endif%}
          </div>
        </div>
        {%endif%}
        
       {%if event.is_in_person%}

        <div class="card info-card sales-card" style="padding-bottom:0px!important;">
  
          <div class="card-body pt-0">
            <h5 class="card-title">
              <a>
                <span style="color:#012970!important;cursor:pointer;">
                  <!-- Default Accordion -->
                  </span></a><div class="accordion" id="voluntary"><a>
                      
                    <div class="accordion-item" style="border:none">
                        <h2 class="accordion-header" id="headingVoluntary">
                          <button class="accordion-button collapsed" type="button" 
                              data-bs-toggle="collapse" 
                              data-bs-target="#collapseVoluntary" 
                              aria-expanded="false" aria-controls="collapseVoluntary" 
                              style="font-weight:bold;border-color:#242e4c;padding-left:0px">
                              {{event.event_title}}&nbsp;<i class="bi bi-info-circle" style="color:#dc3545"></i>
                        </button>
                        </h2>                        
                     
                        <div id="collapseVoluntary" class="accordion-collapse collapse" data-bs-target="#collapseVoluntary" aria-expanded="false" aria-controls="collapseVoluntary" style="">
                          <div class="accordion-body" style="font-size:16px!important;color:#242e4c!important;font-weight:bold">
                            Agenda
                           </div>
                        <div class="accordion-body" style="font-size:16px!important;color:#242e4c!important;">
                         {{event.agenda_item_1}}
                        </div>
                        <div class="accordion-body" style="font-size:16px!important;color:#242e4c!important;">
                          {{event.agenda_item_2}}
                        </div>
                        <div class="accordion-body" style="font-size:16px!important;color:#242e4c!important;">
                          {{event.agenda_item_3}}
                        </div>
                        <div class="accordion-body" style="font-size:16px!important;color:#242e4c!important;">
                          {{event.agenda_item_4}}
                        </div> <div class="accordion-body" style="font-size:16px!important;color:#242e4c!important;">
                          {{event.agenda_item_5}}
                        </div> <div class="accordion-body" style="font-size:16px!important;color:#242e4c!important;">
                          {{event.agenda_item_6}}
                        </div> <div class="accordion-body" style="font-size:16px!important;color:#242e4c!important;">
                          {{event.agenda_item_7}}
                        </div> <div class="accordion-body" style="font-size:16px!important;color:#242e4c!important;">
                          {{event.agenda_item_8}}
                        </div> <div class="accordion-body" style="font-size:16px!important;color:#242e4c!important;">
                          {{event.agenda_item_9}}
                        </div>
                        <div class="accordion-body" style="font-size:16px!important;color:#242e4c!important;">
                          {{event.agenda_item_10}}
                        </div>                        
                      </div>                     
                    </div>                 
              </a>
            </div>
          </h5>
          

            <div class="align-items-center">

              <div class="ps-0">
                <a href="">
                  <p style="font-weight:600;">{{event.introduction}}</p>
                </a>
                <span class="text ps-0 fw-bold" id="footer-text">
                  {{event.event_date|date:"d/m/Y"}},</span>
                  <span class="text pt-1 fw-bold" id="footer-text">
                 {{event.event_time|time:"H:i"}},</span>
                 <span class="text pt-1 fw-bold" id="footer-text">{{event.event_venue}}</span>
                    
                {%if todays_date <= event.event_date and event.rsvp_needed%}
                <a href="{%url 'eventRSVP' event.event_id%}">
                <span class="text fw-bold" style="color:#dc3545!important;float:right;cursor:pointer;">
                  RSVP
                </span>
                </a>
                {%endif%}
              
              </div>
            </div>
          </div>
  
        </div>
        {%endif%}
      </div>
     
        <!-- End card -->
      
        {%endfor%}

    </div>


      </div>
    </div>
  </div>
  <!-- ======= End Team Section ======= -->
   
  </main>       
     

  <a href="#" class="back-to-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>

  <!-- Vendor JS Files -->
  <script src="{% static 'assets/vendor/bootstrap/js/bootstrap.bundle.min.js'%}"></script>
  <script src="{% static 'assets/vendor/glightbox/js/glightbox.min.js'%}"></script>
  <script src="{% static 'assets/vendor/isotope-layout/isotope.pkgd.min.js'%}"></script>
  <script src="{% static 'assets/vendor/swiper/swiper-bundle.min.js'%}"></script>
  <script src="{% static 'assets/vendor/php-email-form/validate.js'%}"></script>

  <!-- Template Main JS File -->
  <script src="{% static 'assets/js/jquery.min.js'%}"></script>
  <script src="{% static 'assets/js/main.js'%}"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.4.32/dist/sweetalert2.all.min.js"></script>
  <script>


    $(document).ready(function(){
      console.log("ready");
      $("#event-search").on("keyup", function() {
        var value = $(this).val().toLowerCase();
        $(".col-xxl-6*").filter(function() {
          $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
        });
      });
    
    });

    if(document.querySelector("#success-message")){

    Swal.fire({
      html:`<div class="text-white">
        <div><h4>Confirmation Received</h4></div>
        <div class="alert-body">
          <p class="alert-text" style="color:#25c0eb!important"><h6>An email notification was sent to the email address provided.</h6></p>
       </div>
      </div>`,
      icon: 'success',
      showCancelButton: false,
      confirmButtonColor: '#3aaf85',
      cancelButtonColor: '#d33',
      confirmButtonText: 'Close',
      allowOutsideClick:false,
      background: '#f9fafb',
    }).then((result) => {
      if (result.isConfirmed) {
        window.location.href =  "{% url 'eventsHomepage' %}";
       
      }
    })  
  }  

  if(document.querySelector("#error-message")){

  Swal.fire({
    html:`<div class="text-white">
      <div><h4>Error</h4></div>
      <div class="alert-body">
        <p class="alert-text"><h6 style="color:#dc3545!important">This event has passed.</h6></p>
     </div>
    </div>`,
    icon: 'error',
    showCancelButton: false,
    confirmButtonColor: '#3aaf85',
    cancelButtonColor: '#d33',
    confirmButtonText: 'Close',
    allowOutsideClick:false,
    background: '#f9fafb',
  }).then((result) => {
    if (result.isConfirmed) {
      window.location.href =  "{% url 'eventsHomepage' %}";
     
    }
  })
}
  </script>
</body>
</html>